<!--Reference: https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Profile_1</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="bootstrap-5.1.3-dist/bootstrap-5.1.3-dist/css/bootstrap.css" rel="stylesheet">
  <script src="bootstrap-5.1.3-dist/bootstrap-5.1.3-dist/js/bootstrap.js"></script>
</head>

<body>

    <input type="file" id="getpath" onchange="addDivElem(event)"> <!--same as using element <button>-->
        <img id="img1" src="" class="img-thumbnail img-rounded" alt="...">

    <div id="PicPath"> <!--call the function when the page has just loaded-->
        <div id="nested"></div>
        <div id="nested"></div>
        <div id="nested"></div>
    </div>

    <div id="div2">The text 2 above has been created dynamically.</div>
    <div id="div1">The text above has been created dynamically.</div>
    
    
<!--JAVA SCRIPT PART-->
<script>
// reference for event reference: https://developer.mozilla.org/en-US/docs/Web/Events
// add a document element

//refer: https://web.dev/read-files/
/*
const fileSelector = document.getElementById('getpath');
fileSelector.addEventListener('change', (event) => {
    const fileList = event.target.files;
    console.log(fileList[0]);
})
*/
function addDivElem(event) // pass the result of the event fired at the element with id="getpath"
{
    //var reader= new FileReader();

    // if the file is uploaded sucessfully
    //reader.addEventListener("load", function ()
    //{
    //    console.log("Hello\n");
    //})
    // get the handle of the element:
    //var pic_area= document.getElementById("PicPath");
    console.log("Hello\n");
    const fileList = event.target.files[0];
    console.log(fileList.name);

    const reader = new FileReader();

    // (event) => {..} : is an arrow function whose input is the 'event' object
    reader.addEventListener('load', (event) => {
    console.log(event.target.result);
    // must get the handle to the tag <img> where the image should be uploaded to
    var img_handle=document.getElementById("img1");

    // the result produced by 'readAsDataURL' is used as the path to the source image here:
    img_handle.src=event.target.result;
    //img.src = event.target.result;
    });

    //console.log(fileList.Blob);

    // must use 'readAsDataURL' in order to get the right path source to the uploaded image!!!
    reader.readAsDataURL(fileList);
    
    
}
// add the tagname- DIV- automatically when the page is loaded
//
//document.getElementById("PicPath").innerHTML="<div class = \"col-sm-4\"><img src="+"\"cuteCats.jpg\""+" class=\"img-fluid img-thumbnail img-rounded\"></div>";
//document.getElementById("PicPath").innerHTML="<div class = \"col-sm-4\"><img src="+"\"cuteCats.jpg\""+" class=\"img-fluid img-thumbnail img-rounded\"></div>";
//document.body.onload = addElement;

function addElement () {
  // create a new div element
  const newDiv = document.createElement("div");

  // and give it some content
  const newContent = document.createTextNode("Hi there and greetings!");

  // add the text node to the newly created div
  newDiv.appendChild(newContent);

  // add the newly created element and its content into the DOM
  const currentDiv = document.getElementById("div1");
  document.body.insertBefore(newDiv, currentDiv);
}

</script>
<!--JAVA SCRIPT PART-->

</body>

</html>